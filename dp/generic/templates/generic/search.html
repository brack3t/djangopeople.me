{% extends "_layouts/map.html" %}
{% load crispy_forms_tags %}

{% block home_nav_class %}active{% endblock %}

{% block page_header %}
    <h1>Search</h>
{% endblock %}

{% block page_content %}
<div class="row-fluid">
    <div class="span3">
        {% crispy form %}
    </div>
    <div class="span9" id="searchResults">
        {% if users %}
        <h1>Results</h1>
            {% for user in users %}
                {% if units == "mi" %}
                    <p>{{ user.user.first_name }} - {{ user.distance.mi }}</p>
                {% else %}
                    <p>{{ user.user.first_name }} - {{ user.distance.km }}</p>
                {% endif %}
            {% endfor %}
        {% endif %}
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="http://maps.stamen.com/js/tile.stamen.js"></script>
<script>
    var map = new L.Map("map", {
        center: new L.LatLng(21.505, -0.09),
        zoom: 3
    });

    var stamenLayer = new L.StamenTileLayer("watercolor", {
            attribution: 'Map tiles by <a href="http://stamen.com">Stamen Design</a>, under <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>. Data by <a href="http://openstreetmap.org">OpenStreetMap</a>, under <a href="http://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>.'
        });

    //map.addLayer(stamenLayer).locateAndSetView(4);
    map.addLayer(stamenLayer);
</script>
{% endblock %}
